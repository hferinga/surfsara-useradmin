language: ruby
services:
  - postgresql
addons:
  postgresql: "9.4"
before_install:
  - sudo add-apt-repository --yes ppa:ubuntu-sdk-team/ppa
  - sudo apt-get -qq update
  - sudo apt-get install -y libqt5webkit5-dev qtdeclarative5-dev
before_script:
  - psql -c 'create database travis_ci_test;' -U postgres
  - cp useradmin/config/database.yml.travis useradmin/config/database.yml
env:
  global:
    - QMAKE=/usr/lib/x86_64-linux-gnu/qt4/bin/qmake
script: cd useradmin && bundle install && xvfb-run bundle exec rspec spec
